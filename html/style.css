/**
 * Questo file definisce l'aspetto e il layout della pagina web,
 * organizzando gli elementi in una struttura a due colonne reattiva
 * e garantendo che i controlli e il video siano chiari e facili da usare.
 */

/* --- Stili Globali --- */
/* Resetta stili di base e imposta un font moderno e pulito per l'intera pagina. */
body, html {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f0f2f5; /* Un grigio chiaro per lo sfondo, meno affaticante del bianco puro */
    color: #333;
    height: 100%;
    /* box-sizing: border-box; garantisce che padding e bordi siano inclusi
       nella larghezza e altezza totale degli elementi, semplificando i calcoli del layout. */
    box-sizing: border-box;
}

/* --- Layout Principale --- */

/* Contenitore principale che definisce il layout a due colonne usando Flexbox. */
.main-container {
    display: flex; /* Attiva il contesto Flexbox */
    flex-direction: row; /* Dispone gli elementi figli (colonne) in orizzontale */
    align-items: flex-start; /* Allinea le colonne all'inizio dell'asse trasversale (in alto) */
    gap: 24px; /* Aggiunge uno spazio uniforme tra le due colonne */
    padding: 24px;
    width: 100%;
    max-width: 1800px; /* Limita la larghezza massima per una leggibilità ottimale su schermi grandi */
    margin: 0 auto; /* Centra il contenitore orizzontalmente nella pagina */
    box-sizing: border-box;
}

/* --- Colonna Sinistra: Player Video --- */

/* Contenitore (wrapper) per il video e il canvas. */
#video-stream-wrapper {
    /* flex: 1 1 60%; è una scorciatoia per:
       - flex-grow: 1 (permette a questo elemento di crescere per occupare lo spazio disponibile)
       - flex-shrink: 1 (permette di restringersi se lo spazio è poco)
       - flex-basis: 60% (dimensione di partenza ideale, il 60% della larghezza del contenitore) */
    flex: 1 1 60%;
    min-width: 320px; /* Larghezza minima per evitare che diventi troppo piccolo su schermi stretti */
    position: relative; /* Necessario per posizionare gli elementi figli (video, canvas, bottone) in modo assoluto al suo interno */
    aspect-ratio: 16 / 9; /* Mantiene il player in formato widescreen (16:9) automaticamente */
    background-color: #000; /* Sfondo nero visibile durante il caricamento dello stream */
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Ombra per dare un effetto di profondità */
    overflow: hidden; /* Nasconde eventuali contenuti che escono dai bordi arrotondati */
}

/* Stili per sovrapporre perfettamente il video e il canvas di disegno. */
#video_stream, #canvas {
    position: absolute; /* Rimuove gli elementi dal normale flusso e li posiziona rispetto al primo antenato con 'position: relative' (#video-stream-wrapper) */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* Il canvas per il disegno deve stare sopra al video. */
#canvas {
    background-color: transparent; /* Sfondo trasparente per vedere il video sottostante */
    z-index: 10; /* Assicura che il canvas sia visivamente sopra l'elemento <img> dello stream */
    cursor: crosshair; /* Cambia il cursore per indicare all'utente che può disegnare */
}

/* Pulsante per la modalità a schermo intero. */
#fullscreenBtn {
    position: absolute; /* Posizionato rispetto al wrapper del video */
    bottom: 12px;
    right: 12px;
    z-index: 20; /* Livello ancora più alto per essere sopra a tutto */
    background-color: rgba(20, 20, 20, 0.7); /* Sfondo semi-trasparente */
    color: white;
    border: none;
    border-radius: 6px;
    padding: 6px;
    cursor: pointer;
    opacity: 0.7; /* Leggermente trasparente per non essere invasivo */
    transition: opacity 0.2s, background-color 0.2s; /* Transizione fluida al passaggio del mouse */
    line-height: 0; /* Utile per centrare l'SVG verticalmente in modo preciso */
    display: flex;
    align-items: center;
    justify-content: center;
}
#fullscreenBtn:hover {
    opacity: 1; /* Completamente opaco al passaggio del mouse */
    background-color: rgba(0, 0, 0, 0.8);
}
#fullscreenBtn svg {
    width: 20px;
    height: 20px;
}

/* --- Colonna Destra: Pannello di Controllo --- */
.config-controls-card {
    flex: 1 1 35%; /* Occupa lo spazio rimanente, ma con una base del 35% */
    min-width: 400px;
    background-color: #fff;
    border-radius: 8px;
    padding: 24px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    /* Imposta un'altezza massima e abilita lo scrolling verticale se il contenuto è troppo,
       evitando che il pannello diventi più alto della finestra del browser. */
    max-height: calc(100vh - 48px); /* 100vh = 100% dell'altezza della finestra; 48px = padding superiore/inferiore */
    overflow-y: auto;
    box-sizing: border-box;
}

/* Stili interni del pannello per organizzare i controlli */
.config-controls-card h3 { margin-top: 0; margin-bottom: 16px; border-bottom: 1px solid #e0e0e0; padding-bottom: 8px; }
.form-group { margin-bottom: 20px; }

/* Stile per le righe di controllo delle luci (label, bottone, coordinate) */
.light-control { display: flex; align-items: center; margin-bottom: 10px; }
.light-control label { font-weight: 500; width: 60px; }
.light-control button {
    padding: 6px 10px;
    font-size: 0.75em;
    font-weight: 600;
    width: 80px;         
    max-width: 90px;
    margin-right: 12px;
    border-radius: 4px;
    background-color: #f5f5f5;
    color: #333;
    border: 1px solid #ccc;
    cursor: pointer;
    transition: background-color 0.2s ease;
    flex-shrink: 0;       
}

input.coords { width: 70px; padding: 6px 8px; border: 1px solid #ccc; border-radius: 4px; margin: 0 4px; }
/* Stile per i display delle coordinate delle luci, con un font monospazio per un allineamento pulito dei numeri */
span.coords-display { display: inline-block; width: 40px; text-align: right; padding-right: 8px; font-family: monospace; }

/* Gruppo per i pulsanti principali in fondo al pannello */
.button-group { display: flex; gap: 10px; margin-top: 24px; }

/* Stile generico per i bottoni */
button { padding: 10px 15px; border-radius: 6px; border: none; font-size: 14px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
button.primary { width: 100%; background-color: #007bff; color: white; }
button.primary:hover { background-color: #0056b3; }
button.secondary { width: 100%; background-color: #e9ecef; color: #333; border: 1px solid #ccc; }
button.secondary:hover { background-color: #d3d9df; }

/* Area di stato per mostrare messaggi all'utente */
#status { margin-top: 16px; font-size: 13px; color: #666; text-align: center; }

/* --- Media Query per la Reattività --- */

/* Quando la larghezza dello schermo è inferiore a 1024px,
   il layout passa da due colonne affiancate a una singola colonna. */
@media (max-width: 1024px) {
    .main-container {
        flex-direction: column; /* Impila le colonne verticalmente */
        align-items: center; /* Centra la colonna rispetto alla pagina */
    }
    /* Entrambe le sezioni occupano ora tutta la larghezza disponibile */
    .config-controls-card, #video-stream-wrapper {
        width: 100%;
        max-width: 800px; /* Limita la larghezza per non essere troppo estese su tablet */
    }
}